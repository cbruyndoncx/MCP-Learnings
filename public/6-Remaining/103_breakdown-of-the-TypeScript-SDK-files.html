<!DOCTYPE html>
<html lang="en"><head><title>103_breakdown of the TypeScript SDK filessourced from github AbhijitKumarJ/MCP-Learnings</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;family=IBM Plex Mono:wght@400;600&amp;display=swap"/><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="MCP Learnings"/><meta property="og:title" content="103_breakdown of the TypeScript SDK filessourced from github AbhijitKumarJ/MCP-Learnings"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="103_breakdown of the TypeScript SDK filessourced from github AbhijitKumarJ/MCP-Learnings"/><meta name="twitter:description" content="Okay, here’s a breakdown of the TypeScript SDK files, ordered approximately from least dependent on other files within this specific SDK repository to most dependent, along with their purposes."/><meta property="og:description" content="Okay, here’s a breakdown of the TypeScript SDK files, ordered approximately from least dependent on other files within this specific SDK repository to most dependent, along with their purposes."/><meta property="og:image:alt" content="Okay, here’s a breakdown of the TypeScript SDK files, ordered approximately from least dependent on other files within this specific SDK repository to most dependent, along with their purposes."/><meta property="og:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="og:image:url" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta name="twitter:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="og:image:type" content="image/.png"/><meta property="twitter:domain" content="quartz.jzhao.xyz"/><meta property="og:url" content="https://quartz.jzhao.xyz/6-Remaining/103_breakdown-of-the-TypeScript-SDK-files"/><meta property="twitter:url" content="https://quartz.jzhao.xyz/6-Remaining/103_breakdown-of-the-TypeScript-SDK-files"/><link rel="icon" href="../static/icon.png"/><meta name="description" content="Okay, here’s a breakdown of the TypeScript SDK files, ordered approximately from least dependent on other files within this specific SDK repository to most dependent, along with their purposes."/><meta name="generator" content="Quartz"/><link href="../index.css" rel="stylesheet" type="text/css" spa-preserve/><style>.expand-button {
  position: absolute;
  display: flex;
  float: right;
  padding: 0.4rem;
  margin: 0.3rem;
  right: 0;
  color: var(--gray);
  border-color: var(--dark);
  background-color: var(--light);
  border: 1px solid;
  border-radius: 5px;
  opacity: 0;
  transition: 0.2s;
}
.expand-button > svg {
  fill: var(--light);
  filter: contrast(0.3);
}
.expand-button:hover {
  cursor: pointer;
  border-color: var(--secondary);
}
.expand-button:focus {
  outline: 0;
}

pre:hover > .expand-button {
  opacity: 1;
  transition: 0.2s;
}

#mermaid-container {
  position: fixed;
  contain: layout;
  z-index: 999;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: none;
  backdrop-filter: blur(4px);
  background: rgba(0, 0, 0, 0.5);
}
#mermaid-container.active {
  display: inline-block;
}
#mermaid-container > #mermaid-space {
  border: 1px solid var(--lightgray);
  background-color: var(--light);
  border-radius: 5px;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: 80vh;
  width: 80vw;
  overflow: hidden;
}
#mermaid-container > #mermaid-space > .mermaid-content {
  padding: 2rem;
  position: relative;
  transform-origin: 0 0;
  transition: transform 0.1s ease;
  overflow: visible;
  min-height: 200px;
  min-width: 200px;
}
#mermaid-container > #mermaid-space > .mermaid-content pre {
  margin: 0;
  border: none;
}
#mermaid-container > #mermaid-space > .mermaid-content svg {
  max-width: none;
  height: auto;
}
#mermaid-container > #mermaid-space > .mermaid-controls {
  position: absolute;
  bottom: 20px;
  right: 20px;
  display: flex;
  gap: 8px;
  padding: 8px;
  background: var(--light);
  border: 1px solid var(--lightgray);
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 2;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  border: 1px solid var(--lightgray);
  background: var(--light);
  color: var(--dark);
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  font-family: var(--bodyFont);
  transition: all 0.2s ease;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:hover {
  background: var(--lightgray);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:active {
  transform: translateY(1px);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:nth-child(2) {
  width: auto;
  padding: 0 12px;
  font-size: 14px;
}
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL2hvbWUvY2IvcHJvamVjdHMvd3d3L01DUC1MZWFybmluZ3MvcXVhcnR6L2NvbXBvbmVudHMvc3R5bGVzIiwic291cmNlcyI6WyJtZXJtYWlkLmlubGluZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTs7QUFHRjtFQUNFOzs7QUFLRjtFQUNFO0VBQ0E7OztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQUNFOztBQUlGO0VBQ0U7RUFDQTtFQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLmV4cGFuZC1idXR0b24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsb2F0OiByaWdodDtcbiAgcGFkZGluZzogMC40cmVtO1xuICBtYXJnaW46IDAuM3JlbTtcbiAgcmlnaHQ6IDA7IC8vIE5PVEU6IHJpZ2h0IHdpbGwgYmUgc2V0IGluIG1lcm1haWQuaW5saW5lLnRzXG4gIGNvbG9yOiB2YXIoLS1ncmF5KTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1kYXJrKTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQpO1xuICBib3JkZXI6IDFweCBzb2xpZDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBvcGFjaXR5OiAwO1xuICB0cmFuc2l0aW9uOiAwLjJzO1xuXG4gICYgPiBzdmcge1xuICAgIGZpbGw6IHZhcigtLWxpZ2h0KTtcbiAgICBmaWx0ZXI6IGNvbnRyYXN0KDAuMyk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpO1xuICB9XG5cbiAgJjpmb2N1cyB7XG4gICAgb3V0bGluZTogMDtcbiAgfVxufVxuXG5wcmUge1xuICAmOmhvdmVyID4gLmV4cGFuZC1idXR0b24ge1xuICAgIG9wYWNpdHk6IDE7XG4gICAgdHJhbnNpdGlvbjogMC4ycztcbiAgfVxufVxuXG4jbWVybWFpZC1jb250YWluZXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGNvbnRhaW46IGxheW91dDtcbiAgei1pbmRleDogOTk5O1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIHdpZHRoOiAxMDB2dztcbiAgaGVpZ2h0OiAxMDB2aDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgZGlzcGxheTogbm9uZTtcbiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDRweCk7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC41KTtcblxuICAmLmFjdGl2ZSB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB9XG5cbiAgJiA+ICNtZXJtYWlkLXNwYWNlIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1saWdodGdyYXkpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWxpZ2h0KTtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHRvcDogNTAlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICBoZWlnaHQ6IDgwdmg7XG4gICAgd2lkdGg6IDgwdnc7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICAgICYgPiAubWVybWFpZC1jb250ZW50IHtcbiAgICAgIHBhZGRpbmc6IDJyZW07XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XG4gICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4xcyBlYXNlO1xuICAgICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gICAgICBtaW4taGVpZ2h0OiAyMDBweDtcbiAgICAgIG1pbi13aWR0aDogMjAwcHg7XG5cbiAgICAgIHByZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgfVxuXG4gICAgICBzdmcge1xuICAgICAgICBtYXgtd2lkdGg6IG5vbmU7XG4gICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmID4gLm1lcm1haWQtY29udHJvbHMge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgYm90dG9tOiAyMHB4O1xuICAgICAgcmlnaHQ6IDIwcHg7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZ2FwOiA4cHg7XG4gICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1saWdodCk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1saWdodGdyYXkpO1xuICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgIHotaW5kZXg6IDI7XG5cbiAgICAgIC5tZXJtYWlkLWNvbnRyb2wtYnV0dG9uIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIHdpZHRoOiAzMnB4O1xuICAgICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0KTtcbiAgICAgICAgY29sb3I6IHZhcigtLWRhcmspO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICBmb250LWZhbWlseTogdmFyKC0tYm9keUZvbnQpO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuXG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgICAgIH1cblxuICAgICAgICAmOmFjdGl2ZSB7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDFweCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdHlsZSB0aGUgcmVzZXQgYnV0dG9uIGRpZmZlcmVudGx5XG4gICAgICAgICY6bnRoLWNoaWxkKDIpIHtcbiAgICAgICAgICB3aWR0aDogYXV0bztcbiAgICAgICAgICBwYWRkaW5nOiAwIDEycHg7XG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0= */</style><script src="../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../static/contentIndex.json").then(data => data.json())</script><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://quartz.jzhao.xyz/index.xml"/></head><body data-slug="6-Remaining/103_breakdown-of-the-TypeScript-SDK-files"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href="..">MCP Learnings</a></h2><div class="spacer mobile-only"></div><div style="display: flex; flex-direction: row; flex-wrap: nowrap; gap: 1rem;"><div style="flex-grow: 1; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><div class="search"><button class="search-button"><p>Search</p><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></button><div class="search-container"><div class="search-space"><input autocomplete="off" class="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div class="search-layout" data-preview="true"></div></div></div></div></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="readermode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="readerIcon" fill="currentColor" stroke="currentColor" stroke-width="0.2" stroke-linecap="round" stroke-linejoin="round" width="64px" height="64px" viewBox="0 0 24 24" aria-label="Reader mode"><title>Reader mode</title><g transform="translate(-1.8, -1.8) scale(1.15, 1.2)"><path d="M8.9891247,2.5 C10.1384702,2.5 11.2209868,2.96705384 12.0049645,3.76669482 C12.7883914,2.96705384 13.8709081,2.5 15.0202536,2.5 L18.7549359,2.5 C19.1691495,2.5 19.5049359,2.83578644 19.5049359,3.25 L19.5046891,4.004 L21.2546891,4.00457396 C21.6343849,4.00457396 21.9481801,4.28672784 21.9978425,4.6528034 L22.0046891,4.75457396 L22.0046891,20.25 C22.0046891,20.6296958 21.7225353,20.943491 21.3564597,20.9931534 L21.2546891,21 L2.75468914,21 C2.37499337,21 2.06119817,20.7178461 2.01153575,20.3517706 L2.00468914,20.25 L2.00468914,4.75457396 C2.00468914,4.37487819 2.28684302,4.061083 2.65291858,4.01142057 L2.75468914,4.00457396 L4.50368914,4.004 L4.50444233,3.25 C4.50444233,2.87030423 4.78659621,2.55650904 5.15267177,2.50684662 L5.25444233,2.5 L8.9891247,2.5 Z M4.50368914,5.504 L3.50468914,5.504 L3.50468914,19.5 L10.9478955,19.4998273 C10.4513189,18.9207296 9.73864328,18.5588115 8.96709342,18.5065584 L8.77307039,18.5 L5.25444233,18.5 C4.87474657,18.5 4.56095137,18.2178461 4.51128895,17.8517706 L4.50444233,17.75 L4.50368914,5.504 Z M19.5049359,17.75 C19.5049359,18.1642136 19.1691495,18.5 18.7549359,18.5 L15.2363079,18.5 C14.3910149,18.5 13.5994408,18.8724714 13.0614828,19.4998273 L20.5046891,19.5 L20.5046891,5.504 L19.5046891,5.504 L19.5049359,17.75 Z M18.0059359,3.999 L15.0202536,4 L14.8259077,4.00692283 C13.9889509,4.06666544 13.2254227,4.50975805 12.7549359,5.212 L12.7549359,17.777 L12.7782651,17.7601316 C13.4923805,17.2719483 14.3447024,17 15.2363079,17 L18.0059359,16.999 L18.0056891,4.798 L18.0033792,4.75457396 L18.0056891,4.71 L18.0059359,3.999 Z M8.9891247,4 L6.00368914,3.999 L6.00599909,4.75457396 L6.00599909,4.75457396 L6.00368914,4.783 L6.00368914,16.999 L8.77307039,17 C9.57551536,17 10.3461406,17.2202781 11.0128313,17.6202194 L11.2536891,17.776 L11.2536891,5.211 C10.8200889,4.56369974 10.1361548,4.13636104 9.37521067,4.02745763 L9.18347055,4.00692283 L8.9891247,4 Z"></path></g></svg></button></div></div><div class="explorer" data-behavior="link" data-collapsed="collapsed" data-savestate="true" data-data-fns="{&quot;order&quot;:[&quot;filter&quot;,&quot;map&quot;,&quot;sort&quot;],&quot;sortFn&quot;:&quot;(a,b)=>!a.isFolder&amp;&amp;!b.isFolder||a.isFolder&amp;&amp;b.isFolder?a.displayName.localeCompare(b.displayName,void 0,{numeric:!0,sensitivity:\&quot;base\&quot;}):!a.isFolder&amp;&amp;b.isFolder?1:-1&quot;,&quot;filterFn&quot;:&quot;node=>node.slugSegment!==\&quot;tags\&quot;&quot;,&quot;mapFn&quot;:&quot;node=>node&quot;}"><button type="button" class="explorer-toggle mobile-explorer hide-until-loaded" data-mobile="true" aria-controls="explorer-content"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><button type="button" class="title-button explorer-toggle desktop-explorer" data-mobile="false" aria-expanded="true"><h2>Explorer</h2><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div class="explorer-content" aria-expanded="false"><ul class="explorer-ul overflow" id="list-0"><li class="overflow-end"></li></ul></div><template id="template-file"><li><a href="#"></a></li></template><template id="template-folder"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div><button class="folder-button"><span class="folder-title"></span></button></div></div><div class="folder-outer"><ul class="content"></ul></div></li></template></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../6-Remaining/">6 Remaining</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>103_breakdown of the TypeScript SDK files</a></div></nav><h1 class="article-title">103_breakdown of the TypeScript SDK files</h1><p show-comma="true" class="content-meta"><time datetime="2025-05-08T22:09:05.000Z">May 09, 2025</time><span>6 min read</span></p></div></div><article class="popover-hint"><p>Okay, here’s a breakdown of the TypeScript SDK files, ordered approximately from least dependent on other files <em>within this specific SDK repository</em> to most dependent, along with their purposes.</p>
<p><strong>Level 0: Foundational Definitions &amp; Self-Contained Utilities</strong></p>
<ol>
<li><code>src/types.ts</code>:
<ul>
<li><strong>Purpose:</strong> <strong>THE foundational definitions.</strong> Defines all MCP message structures (Requests, Responses, Notifications, Primitives like Tool, Resource, Prompt, Content types, Capabilities, etc.) using Zod schemas. Derives corresponding TypeScript types using <code>z.infer</code>. Defines protocol constants (<code>LATEST_PROTOCOL_VERSION</code>, <code>JSONRPC_VERSION</code>) and error codes (<code>ErrorCode</code>).</li>
<li><strong>Dependencies:</strong> Zod (external). Minimal internal dependencies, potentially simple enums/types from itself.</li>
</ul>
</li>
<li><code>src/shared/transport.ts</code>:
<ul>
<li><strong>Purpose:</strong> Defines the abstract <code>Transport</code> interface contract (methods <code>start</code>, <code>send</code>, <code>close</code>, callbacks <code>onmessage</code>, <code>onclose</code>, <code>onerror</code>) and <code>TransportSendOptions</code>.</li>
<li><strong>Dependencies:</strong> <code>types.ts</code> (for <code>JSONRPCMessage</code>, <code>RequestId</code>, <code>AuthInfo</code>). Minimal implementation.</li>
</ul>
</li>
<li><code>src/shared/stdio.ts</code>:
<ul>
<li><strong>Purpose:</strong> Provides utilities specific to newline-delimited JSON framing for the Stdio transport (<code>ReadBuffer</code>, <code>serializeMessage</code>, <code>deserializeMessage</code>).</li>
<li><strong>Dependencies:</strong> <code>types.ts</code> (for <code>JSONRPCMessage</code>, <code>JSONRPCMessageSchema</code>).</li>
</ul>
</li>
<li><code>src/shared/uriTemplate.ts</code>:
<ul>
<li><strong>Purpose:</strong> Implements RFC 6570 URI Template parsing and expansion. Used for dynamic resources.</li>
<li><strong>Dependencies:</strong> None internal (standard JS/TS APIs).</li>
</ul>
</li>
<li><code>src/server/auth/types.ts</code>:
<ul>
<li><strong>Purpose:</strong> Defines the <code>AuthInfo</code> interface used to represent validated authentication context passed to handlers.</li>
<li><strong>Dependencies:</strong> None internal.</li>
</ul>
</li>
<li><code>src/shared/auth.ts</code>:
<ul>
<li><strong>Purpose:</strong> Defines shared Zod schemas for standard OAuth 2.1 data structures (Tokens, Metadata, Client Info, Errors) used by both client and server auth components.</li>
<li><strong>Dependencies:</strong> Zod (external).</li>
</ul>
</li>
<li><code>src/server/auth/errors.ts</code>:
<ul>
<li><strong>Purpose:</strong> Defines custom Error subclasses for specific OAuth errors (e.g., <code>InvalidRequestError</code>, <code>InvalidClientError</code>), inheriting from a base <code>OAuthError</code>.</li>
<li><strong>Dependencies:</strong> Base <code>Error</code>.</li>
</ul>
</li>
</ol>
<p><strong>Level 1: Core Protocol Logic</strong></p>
<ol start="8">
<li><code>src/shared/protocol.ts</code>:
<ul>
<li><strong>Purpose:</strong> Implements the abstract <code>Protocol</code> base class. Contains the core JSON-RPC message handling logic: request/response correlation, ID management, notification dispatch, timeout handling (<code>DEFAULT_REQUEST_TIMEOUT_MSEC</code>, <code>RequestOptions</code>), cancellation, progress notification processing. Defines <code>RequestHandlerExtra</code>.</li>
<li><strong>Dependencies:</strong> <code>types.ts</code>, <code>shared/transport.ts</code>, <code>server/auth/types.ts</code>.</li>
</ul>
</li>
</ol>
<p><strong>Level 2: Base Client/Server Implementations</strong></p>
<ol start="9">
<li><code>src/client/index.ts</code>:
<ul>
<li><strong>Purpose:</strong> Defines the primary <code>Client</code> class. Extends <code>Protocol</code>. Implements the client-side initialization handshake, capability checking against server capabilities, and provides high-level methods (<code>ping</code>, <code>listTools</code>, <code>callTool</code>, <code>readResource</code>, <code>getPrompt</code>, <code>setLoggingLevel</code>, etc.) which wrap <code>protocol.request</code>. Defines <code>ClientOptions</code>.</li>
<li><strong>Dependencies:</strong> <code>shared/protocol.ts</code>, <code>types.ts</code>, <code>shared/transport.ts</code>.</li>
</ul>
</li>
<li><code>src/server/index.ts</code>:
<ul>
<li><strong>Purpose:</strong> Defines the low-level <code>Server</code> class. Extends <code>Protocol</code>. Implements the server-side initialization handshake response, capability checking against client capabilities, and provides <code>setRequestHandler</code>/<code>setNotificationHandler</code> for registering logic for specific MCP methods using Zod schemas. Defines <code>ServerOptions</code>.</li>
<li><strong>Dependencies:</strong> <code>shared/protocol.ts</code>, <code>types.ts</code>, <code>shared/transport.ts</code>.</li>
</ul>
</li>
</ol>
<p><strong>Level 3: Concrete Transport Implementations</strong></p>
<ol start="11">
<li><code>src/inMemory.ts</code>:
<ul>
<li><strong>Purpose:</strong> Implements the <code>Transport</code> interface for testing client/server interactions entirely within memory using shared queues. Includes <code>createLinkedPair</code>.</li>
<li><strong>Dependencies:</strong> <code>shared/transport.ts</code>, <code>types.ts</code>, <code>server/auth/types.ts</code>.</li>
</ul>
</li>
<li><code>src/client/stdio.ts</code>:
<ul>
<li><strong>Purpose:</strong> Implements <code>Transport</code> for the client side of Stdio communication. Manages spawning and communicating with a child process using <code>cross-spawn</code>. Includes <code>StdioClientTransportOptions</code> and <code>getDefaultEnvironment</code>.</li>
<li><strong>Dependencies:</strong> <code>shared/transport.ts</code>, <code>shared/stdio.ts</code>, <code>types.ts</code>, <code>cross-spawn</code> (external).</li>
</ul>
</li>
<li><code>src/server/stdio.ts</code>:
<ul>
<li><strong>Purpose:</strong> Implements <code>Transport</code> for the server side of Stdio communication. Reads from <code>process.stdin</code> and writes to <code>process.stdout</code>.</li>
<li><strong>Dependencies:</strong> <code>shared/transport.ts</code>, <code>shared/stdio.ts</code>, <code>types.ts</code>.</li>
</ul>
</li>
<li><code>src/client/websocket.ts</code>:
<ul>
<li><strong>Purpose:</strong> Implements <code>Transport</code> for client-side WebSocket communication. Uses the <code>ws</code> library.</li>
<li><strong>Dependencies:</strong> <code>shared/transport.ts</code>, <code>types.ts</code>, <code>ws</code> (external).</li>
</ul>
</li>
<li><code>src/client/auth.ts</code>:
<ul>
<li><strong>Purpose:</strong> Provides client-side helper functions for initiating OAuth 2.1 flows (discovery, start auth, exchange code, refresh token, register client). Uses <code>fetch</code> and <code>pkce-challenge</code>.</li>
<li><strong>Dependencies:</strong> <code>shared/auth.ts</code>, <code>types.ts</code> (for <code>LATEST_PROTOCOL_VERSION</code>), <code>pkce-challenge</code> (external/mocked).</li>
</ul>
</li>
<li><code>src/client/sse.ts</code>:
<ul>
<li><strong>Purpose:</strong> Implements <code>Transport</code> for the <em>legacy</em> HTTP+SSE client (dual endpoint: GET <code>/sse</code>, POST <code>/message</code>). Includes optional OAuth handling via <code>authProvider</code> option.</li>
<li><strong>Dependencies:</strong> <code>shared/transport.ts</code>, <code>types.ts</code>, <code>client/auth.ts</code>, <code>eventsource</code> (external).</li>
</ul>
</li>
<li><code>src/server/sse.ts</code>:
<ul>
<li><strong>Purpose:</strong> Implements <code>Transport</code> for the <em>legacy</em> HTTP+SSE server. Handles the <code>GET /sse</code> stream (using Node <code>http.ServerResponse</code>) and <code>POST /message</code> requests (parsing body, using <code>sessionId</code> query param).</li>
<li><strong>Dependencies:</strong> <code>shared/transport.ts</code>, <code>types.ts</code>, <code>server/auth/types.ts</code>, Node <code>http</code>, <code>crypto</code>, <code>url</code>, <code>content-type</code>, <code>raw-body</code> (external).</li>
</ul>
</li>
<li><code>src/client/streamableHttp.ts</code>:
<ul>
<li><strong>Purpose:</strong> Implements <code>Transport</code> for the <em>modern</em> Streamable HTTP client (single endpoint GET/POST). Handles SSE/JSON responses, header-based sessions, <code>Last-Event-ID</code> for resumability, reconnection logic. Includes optional OAuth handling via <code>authProvider</code>.</li>
<li><strong>Dependencies:</strong> <code>shared/transport.ts</code>, <code>types.ts</code>, <code>client/auth.ts</code>, <code>eventsource-parser/stream</code> (external).</li>
</ul>
</li>
<li><code>src/server/streamableHttp.ts</code>:
<ul>
<li><strong>Purpose:</strong> Implements <code>Transport</code> for the <em>modern</em> Streamable HTTP server. Handles GET/POST/DELETE on a single endpoint, manages sessions via <code>Mcp-Session-Id</code> header, supports SSE/JSON response modes, implements resumability via the <code>EventStore</code> interface.</li>
<li><strong>Dependencies:</strong> <code>shared/transport.ts</code>, <code>types.ts</code>, <code>server/auth/types.ts</code>, Node <code>http</code>, <code>crypto</code>, <code>content-type</code>, <code>raw-body</code> (external). Defines <code>EventStore</code>, <code>StreamableHTTPServerTransportOptions</code>.</li>
</ul>
</li>
</ol>
<p><strong>Level 4: High-Level Server Abstractions &amp; OAuth Implementation</strong></p>
<ol start="20">
<li><code>src/server/completable.ts</code>:
<ul>
<li><strong>Purpose:</strong> Defines the <code>Completable</code> Zod schema wrapper and related types used to add autocompletion logic to tool/prompt arguments.</li>
<li><strong>Dependencies:</strong> Zod (external).</li>
</ul>
</li>
<li><code>src/server/mcp.ts</code>:
<ul>
<li><strong>Purpose:</strong> Defines the high-level <code>McpServer</code> class. Provides ergonomic <code>.tool()</code>, <code>.resource()</code>, <code>.prompt()</code> methods for registering primitives. Wraps the low-level <code>Server</code>, automatically setting up handlers and generating schemas (<code>zod-to-json-schema</code>). Returns handles (<code>RegisteredTool</code>, etc.) for dynamic management. Defines <code>ResourceTemplate</code>.</li>
<li><strong>Dependencies:</strong> <code>server/index.ts</code>, <code>types.ts</code>, Zod, <code>zod-to-json-schema</code> (external), <code>server/completable.ts</code>, <code>shared/uriTemplate.ts</code>.</li>
</ul>
</li>
<li><code>src/server/auth/clients.ts</code>:
<ul>
<li><strong>Purpose:</strong> Defines the <code>OAuthRegisteredClientsStore</code> interface contract for storing/retrieving OAuth client registrations.</li>
<li><strong>Dependencies:</strong> <code>shared/auth.ts</code>.</li>
</ul>
</li>
<li><code>src/server/auth/provider.ts</code>:
<ul>
<li><strong>Purpose:</strong> Defines the <code>OAuthServerProvider</code> interface contract, outlining the methods needed to implement the core OAuth logic (authorize, exchange tokens, verify tokens, revoke).</li>
<li><strong>Dependencies:</strong> Express types (external), <code>server/auth/clients.ts</code>, <code>shared/auth.ts</code>, <code>server/auth/types.ts</code>.</li>
</ul>
</li>
<li><code>src/server/auth/middleware/allowedMethods.ts</code>:
<ul>
<li><strong>Purpose:</strong> Express middleware to reject requests using disallowed HTTP methods for an endpoint.</li>
<li><strong>Dependencies:</strong> Express types (external), <code>server/auth/errors.ts</code>.</li>
</ul>
</li>
<li><code>src/server/auth/middleware/clientAuth.ts</code>:
<ul>
<li><strong>Purpose:</strong> Express middleware to authenticate an OAuth client based on <code>client_id</code> and <code>client_secret</code> in the request body (for <code>/token</code>, <code>/revoke</code> endpoints). Attaches <code>req.client</code>.</li>
<li><strong>Dependencies:</strong> Express types (external), Zod, <code>server/auth/clients.ts</code>, <code>shared/auth.ts</code>, <code>server/auth/errors.ts</code>.</li>
</ul>
</li>
<li><code>src/server/auth/middleware/bearerAuth.ts</code>:
<ul>
<li><strong>Purpose:</strong> Express middleware to authenticate requests using a Bearer token in the <code>Authorization</code> header. Validates the token using the <code>OAuthServerProvider</code> and attaches <code>req.auth</code>. Used to protect MCP endpoints.</li>
<li><strong>Dependencies:</strong> Express types (external), <code>server/auth/provider.ts</code>, <code>server/auth/errors.ts</code>, <code>server/auth/types.ts</code>.</li>
</ul>
</li>
<li><code>src/server/auth/handlers/*.ts</code> (authorize, metadata, register, revoke, token):
<ul>
<li><strong>Purpose:</strong> Implement the request handling logic for each standard OAuth endpoint (<code>/authorize</code>, <code>/.well-known/...</code>, <code>/register</code>, <code>/revoke</code>, <code>/token</code>). They parse requests, apply middleware (like <code>authenticateClient</code>), call the appropriate <code>OAuthServerProvider</code> methods, and format responses.</li>
<li><strong>Dependencies:</strong> Express types (external), <code>server/auth/provider.ts</code>, middleware, errors, shared types, Zod.</li>
</ul>
</li>
<li><code>src/server/auth/providers/proxyProvider.ts</code>:
<ul>
<li><strong>Purpose:</strong> Provides a concrete implementation of <code>OAuthServerProvider</code> that proxies requests to an upstream OAuth server.</li>
<li><strong>Dependencies:</strong> <code>server/auth/provider.ts</code>, <code>server/auth/clients.ts</code>, <code>shared/auth.ts</code>, <code>server/auth/errors.ts</code>, <code>fetch</code> (likely via Node or polyfill).</li>
</ul>
</li>
</ol>
<p><strong>Level 5: Top-Level Integration &amp; Examples</strong></p>
<ol start="29">
<li><code>src/server/auth/router.ts</code>:
<ul>
<li><strong>Purpose:</strong> Provides the <code>mcpAuthRouter</code> function, which conveniently creates and configures an Express router with all the standard OAuth endpoint handlers and middleware, wired to a given <code>OAuthServerProvider</code>.</li>
<li><strong>Dependencies:</strong> Express (external), all files in <code>server/auth/handlers/</code> and <code>server/auth/middleware/</code>, <code>server/auth/provider.ts</code>.</li>
</ul>
</li>
<li><code>src/cli.ts</code>:
<ul>
<li><strong>Purpose:</strong> A simple command-line interface for running basic client/server examples, primarily using Stdio but also demonstrating SSE/WebSocket client connection.</li>
<li><strong>Dependencies:</strong> <code>client/index.ts</code>, <code>server/index.ts</code>, various transport implementations, <code>types.ts</code>, <code>ws</code> (external).</li>
</ul>
</li>
<li><code>src/examples/**/*.ts</code>:
<ul>
<li><strong>Purpose:</strong> Practical examples demonstrating how to build clients and servers using the SDK, showcasing features like different transports, state management, resumability, and parallel operations.</li>
<li><strong>Dependencies:</strong> Various core client/server classes (<code>Client</code>, <code>McpServer</code>), transports, types.</li>
</ul>
</li>
<li><code>src/integration-tests/**/*.ts</code>:
<ul>
<li><strong>Purpose:</strong> Tests designed to verify the interaction between client and server components, often involving real (but controlled) transports or specific feature interactions like resumability.</li>
<li><strong>Dependencies:</strong> Core client/server classes, transports, types, testing framework (Jest).</li>
</ul>
</li>
<li><code>src/**/*.test.ts</code> (Unit Tests):
<ul>
<li><strong>Purpose:</strong> Test individual classes or functions in isolation.</li>
<li><strong>Dependencies:</strong> The specific unit under test, mocking libraries (Jest), potentially <code>inMemory.ts</code>.</li>
</ul>
</li>
</ol>
<p>This ordering flows from foundational type definitions and utilities <span>→</span> core protocol logic <span>→</span> client/server base classes <span>→</span> specific communication transports <span>→</span> high-level abstractions <span>→</span> complex features like OAuth <span>→</span> top-level entry points, examples, and tests.</p></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div class="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false,&quot;enableRadial&quot;:false}"></div><button class="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div class="global-graph-outer"><div class="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.2,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true,&quot;enableRadial&quot;:true}"></div></div></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.5.0</a> © 2025</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript">function n(){let t=this.parentElement;t.classList.toggle("is-collapsed");let e=t.getElementsByClassName("callout-content")[0];if(!e)return;let l=t.classList.contains("is-collapsed");e.style.gridTemplateRows=l?"0fr":"1fr"}function c(){let t=document.getElementsByClassName("callout is-collapsible");for(let e of t){let l=e.getElementsByClassName("callout-title")[0],s=e.getElementsByClassName("callout-content")[0];if(!l||!s)continue;l.addEventListener("click",n),window.addCleanup(()=>l.removeEventListener("click",n));let o=e.classList.contains("is-collapsed");s.style.gridTemplateRows=o?"0fr":"1fr"}}document.addEventListener("nav",c);
</script><script type="module">function f(i,e){if(!i)return;function r(o){o.target===this&&(o.preventDefault(),o.stopPropagation(),e())}function t(o){o.key.startsWith("Esc")&&(o.preventDefault(),e())}i?.addEventListener("click",r),window.addCleanup(()=>i?.removeEventListener("click",r)),document.addEventListener("keydown",t),window.addCleanup(()=>document.removeEventListener("keydown",t))}function y(i){for(;i.firstChild;)i.removeChild(i.firstChild)}var h=class{constructor(e,r){this.container=e;this.content=r;this.setupEventListeners(),this.setupNavigationControls(),this.resetTransform()}isDragging=!1;startPan={x:0,y:0};currentPan={x:0,y:0};scale=1;MIN_SCALE=.5;MAX_SCALE=3;cleanups=[];setupEventListeners(){let e=this.onMouseDown.bind(this),r=this.onMouseMove.bind(this),t=this.onMouseUp.bind(this),o=this.resetTransform.bind(this);this.container.addEventListener("mousedown",e),document.addEventListener("mousemove",r),document.addEventListener("mouseup",t),window.addEventListener("resize",o),this.cleanups.push(()=>this.container.removeEventListener("mousedown",e),()=>document.removeEventListener("mousemove",r),()=>document.removeEventListener("mouseup",t),()=>window.removeEventListener("resize",o))}cleanup(){for(let e of this.cleanups)e()}setupNavigationControls(){let e=document.createElement("div");e.className="mermaid-controls";let r=this.createButton("+",()=>this.zoom(.1)),t=this.createButton("-",()=>this.zoom(-.1)),o=this.createButton("Reset",()=>this.resetTransform());e.appendChild(t),e.appendChild(o),e.appendChild(r),this.container.appendChild(e)}createButton(e,r){let t=document.createElement("button");return t.textContent=e,t.className="mermaid-control-button",t.addEventListener("click",r),window.addCleanup(()=>t.removeEventListener("click",r)),t}onMouseDown(e){e.button===0&&(this.isDragging=!0,this.startPan={x:e.clientX-this.currentPan.x,y:e.clientY-this.currentPan.y},this.container.style.cursor="grabbing")}onMouseMove(e){this.isDragging&&(e.preventDefault(),this.currentPan={x:e.clientX-this.startPan.x,y:e.clientY-this.startPan.y},this.updateTransform())}onMouseUp(){this.isDragging=!1,this.container.style.cursor="grab"}zoom(e){let r=Math.min(Math.max(this.scale+e,this.MIN_SCALE),this.MAX_SCALE),t=this.content.getBoundingClientRect(),o=t.width/2,n=t.height/2,c=r-this.scale;this.currentPan.x-=o*c,this.currentPan.y-=n*c,this.scale=r,this.updateTransform()}updateTransform(){this.content.style.transform=`translate(${this.currentPan.x}px, ${this.currentPan.y}px) scale(${this.scale})`}resetTransform(){this.scale=1;let e=this.content.querySelector("svg");this.currentPan={x:e.getBoundingClientRect().width/2,y:e.getBoundingClientRect().height/2},this.updateTransform()}},C=["--secondary","--tertiary","--gray","--light","--lightgray","--highlight","--dark","--darkgray","--codeFont"],E;document.addEventListener("nav",async()=>{let e=document.querySelector(".center").querySelectorAll("code.mermaid");if(e.length===0)return;E||=await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.esm.min.mjs");let r=E.default,t=new WeakMap;for(let n of e)t.set(n,n.innerText);async function o(){for(let s of e){s.removeAttribute("data-processed");let a=t.get(s);a&&(s.innerHTML=a)}let n=C.reduce((s,a)=>(s[a]=window.getComputedStyle(document.documentElement).getPropertyValue(a),s),{}),c=document.documentElement.getAttribute("saved-theme")==="dark";r.initialize({startOnLoad:!1,securityLevel:"loose",theme:c?"dark":"base",themeVariables:{fontFamily:n["--codeFont"],primaryColor:n["--light"],primaryTextColor:n["--darkgray"],primaryBorderColor:n["--tertiary"],lineColor:n["--darkgray"],secondaryColor:n["--secondary"],tertiaryColor:n["--tertiary"],clusterBkg:n["--light"],edgeLabelBackground:n["--highlight"]}}),await r.run({nodes:e})}await o(),document.addEventListener("themechange",o),window.addCleanup(()=>document.removeEventListener("themechange",o));for(let n=0;n<e.length;n++){let v=function(){let g=l.querySelector("#mermaid-space"),m=l.querySelector(".mermaid-content");if(!m)return;y(m);let w=c.querySelector("svg").cloneNode(!0);m.appendChild(w),l.classList.add("active"),g.style.cursor="grab",u=new h(g,m)},M=function(){l.classList.remove("active"),u?.cleanup(),u=null},c=e[n],s=c.parentElement,a=s.querySelector(".clipboard-button"),d=s.querySelector(".expand-button"),p=window.getComputedStyle(a),L=a.offsetWidth+parseFloat(p.marginLeft||"0")+parseFloat(p.marginRight||"0");d.style.right=`calc(${L}px + 0.3rem)`,s.prepend(d);let l=s.querySelector("#mermaid-container");if(!l)return;let u=null;d.addEventListener("click",v),f(l,M),window.addCleanup(()=>{u?.cleanup(),d.removeEventListener("click",v)})}});
</script><script type="application/javascript">
        const socket = new WebSocket('ws://localhost:3001')
        // reload(true) ensures resources like images and scripts are fetched again in firefox
        socket.addEventListener('message', () => document.location.reload(true))
      </script><script src="../postscript.js" type="module"></script></html>